"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6561,73],{76561:function(me,A,e){e.r(A);var O=e(46686),o=e.n(O),l=e(63313),S=e.n(l),W=e(77073),z=e(26322),c=e(7691),h=e(74309),E=e(51970),H=e(98505),p=e(90138),U=e(30555),V=e(27151),y=e(648),j=e(71974),_=e(11527),r=W.Z.Option,F={".py":"python",".js":"javascript",".sh":"shell",".ts":"typescript"},_e={python:".py",javascript:".js",shell:".sh",typescript:".ts"},m=function(n){var v=n.treeData,t=n.currentNode,d=n.content,M=n.handleCancel,$=n.visible,g=n.socketMessage,Y=(0,l.useState)(""),D=o()(Y,2),w=D[0],P=D[1],f=(0,l.useState)("javascript"),C=o()(f,2),I=C[0],k=C[1],R=(0,l.useState)(),b=o()(R,2),i=b[0],L=b[1],q=(0,l.useState)(""),x=o()(q,2),K=x[0],ae=x[1],oe=(0,l.useState)(!1),le=o()(oe,2),G=le[0],re=le[1],Ee=(0,l.useState)(!1),se=o()(Ee,2),B=se[0],ie=se[1],X=(0,l.useState)(""),ee=o()(X,2),ne=ee[0],Z=ee[1],ve=(0,j.F)(),te=ve.theme,J=(0,l.useRef)(null),ge=(0,l.useState)(!1),ue=o()(ge,2),Q=ue[0],N=ue[1],fe=function(){M()},Oe=function(a,T){if(!(T.key===K||!a)){var Me=F[a.slice(-3)]||"";L(T),k(Me),he(T),ae(T.key)}},he=function(a){E.W.get("".concat(H.Z.apiPrefix,"scripts/").concat(a.title,"?path=").concat(a.parent||"")).then(function(T){P(T.data)})},pe=function(){Z("");var a=J.current.getValue().replace(/\r\n/g,`
`);E.W.put("".concat(H.Z.apiPrefix,"scripts/run"),{data:{filename:i.title,path:i.parent||"",content:a}}).then(function(T){N(!0)})},de=function(){if(!(!i||!i.title)){var a=J.current.getValue().replace(/\r\n/g,`
`);E.W.put("".concat(H.Z.apiPrefix,"scripts/stop"),{data:{filename:i.title,path:i.parent||"",content:a}}).then(function(T){N(!1)})}};return(0,l.useEffect)(function(){if(!!g){var u=g.type,a=g.message,T=g.references;u==="manuallyRunScript"&&(a.includes("\u6267\u884C\u7ED3\u675F")&&setTimeout(function(){N(!1)},300),ne&&(a=`
`.concat(a)),Z("".concat(ne).concat(a)))}},[g]),(0,l.useEffect)(function(){t&&(L(t),P(d),ae(t.key))},[d,t]),(0,_.jsxs)(z.Z,{className:"edit-modal",closable:!1,title:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(c.Z,{style:{marginRight:8,width:150},value:K,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:v,placeholder:"\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6",fieldNames:{value:"key",label:"title"},showSearch:!0,onSelect:Oe}),(0,_.jsxs)(W.Z,{value:I,style:{width:110,marginRight:8},onChange:function(a){k(a)},children:[(0,_.jsx)(r,{value:"javascript",children:"javascript"}),(0,_.jsx)(r,{value:"typescript",children:"typescript"}),(0,_.jsx)(r,{value:"shell",children:"shell"}),(0,_.jsx)(r,{value:"python",children:"python"})]}),(0,_.jsx)(h.Z,{type:"primary",style:{marginRight:8},onClick:Q?de:pe,children:Q?"\u505C\u6B62":"\u8FD0\u884C"}),(0,_.jsx)(h.Z,{type:"primary",style:{marginRight:8},onClick:function(){Z("")},children:"\u6E05\u7A7A\u65E5\u5FD7"}),(0,_.jsx)(h.Z,{type:"primary",style:{marginRight:8},onClick:function(){ie(!0)},children:"\u8BBE\u7F6E"}),(0,_.jsx)(h.Z,{type:"primary",style:{marginRight:8},onClick:function(){re(!0)},children:"\u4FDD\u5B58"}),(0,_.jsx)(h.Z,{type:"primary",style:{marginRight:8},onClick:function(){de(),M()},children:"\u9000\u51FA"})]}),width:"100%",headerStyle:{padding:"11px 24px"},onClose:fe,open:$,children:[(0,_.jsxs)(p.Z,{split:"vertical",minSize:200,defaultSize:"50%",style:{height:"calc(100vh - 55px)"},children:[(0,_.jsx)(U.ZP,{language:I,value:w,theme:te,options:{fontSize:12,minimap:{enabled:!1},lineNumbersMinChars:3,glyphMargin:!1},onMount:function(a){J.current=a}}),(0,_.jsx)("pre",{style:{height:"100%",whiteSpace:"break-spaces"},children:ne})]}),(0,_.jsx)(V.default,{visible:G,handleCancel:function(){re(!1)},file:{content:J.current&&J.current.getValue().replace(/\r\n/g,`
`),filename:i==null?void 0:i.title}}),(0,_.jsx)(y.default,{visible:B,handleCancel:function(){ie(!1)}})]})};A.default=m},27151:function(me,A,e){e.r(A);var O=e(35290),o=e.n(O),l=e(30279),S=e.n(l),W=e(411),z=e.n(W),c=e(46686),h=e.n(c),E=e(63313),H=e.n(E),p=e(78455),U=e(80743),V=e(97325),y=e(2991),j=e(51970),_=e(98505),r=e(11527),F=function(m){var s=m.file,n=m.handleCancel,v=m.visible,t=p.Z.useForm(),d=h()(t,1),M=d[0],$=(0,E.useState)(!1),g=h()($,2),Y=g[0],D=g[1],w=function(){var P=z()(o()().mark(function f(C){var I;return o()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:D(!0),I=S()(S()(S()({},s),C),{},{originFilename:s.filename}),j.W.post("".concat(_.Z.apiPrefix,"scripts"),{data:I}).then(function(b){var i=b.code,L=b.data;i===200?(U.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),n(L)):U.ZP.error(L),D(!1)});case 3:case"end":return R.stop()}},f)}));return function(C){return P.apply(this,arguments)}}();return(0,E.useEffect)(function(){M.resetFields(),D(!1)},[s,v]),(0,r.jsx)(V.Z,{title:"\u4FDD\u5B58\u6587\u4EF6",open:v,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){M.validateFields().then(function(f){w(f)}).catch(function(f){console.log("Validate Failed:",f)})},onCancel:function(){return n()},confirmLoading:Y,children:(0,r.jsxs)(p.Z,{form:M,layout:"vertical",name:"script_modal",initialValues:s,children:[(0,r.jsx)(p.Z.Item,{name:"filename",label:"\u6587\u4EF6\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"}],children:(0,r.jsx)(y.Z,{placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"})}),(0,r.jsx)(p.Z.Item,{name:"path",label:"\u4FDD\u5B58\u76EE\u5F55",children:(0,r.jsx)(y.Z,{placeholder:"\u8BF7\u8F93\u5165\u4FDD\u5B58\u76EE\u5F55\uFF0C\u9ED8\u8BA4scripts\u76EE\u5F55"})})]})})};A.default=F},648:function(me,A,e){e.r(A);var O=e(35290),o=e.n(O),l=e(30279),S=e.n(l),W=e(411),z=e.n(W),c=e(46686),h=e.n(c),E=e(63313),H=e.n(E),p=e(78455),U=e(80743),V=e(97325),y=e(2991),j=e(51970),_=e(98505),r=e(11527),F=function(m){var s=m.file,n=m.handleCancel,v=m.visible,t=p.Z.useForm(),d=h()(t,1),M=d[0],$=(0,E.useState)(!1),g=h()($,2),Y=g[0],D=g[1],w=function(){var P=z()(o()().mark(function f(C){var I;return o()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:D(!0),I=S()(S()({},s),C),j.W.post("".concat(_.Z.apiPrefix,"scripts"),{data:I}).then(function(b){var i=b.code,L=b.data;i===200?(U.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),n(L)):U.ZP.error(L),D(!1)});case 3:case"end":return R.stop()}},f)}));return function(C){return P.apply(this,arguments)}}();return(0,E.useEffect)(function(){M.resetFields(),D(!1)},[s,v]),(0,r.jsx)(V.Z,{title:"\u8FD0\u884C\u8BBE\u7F6E",open:v,forceRender:!0,centered:!0,onCancel:function(){return n()},children:(0,r.jsx)(p.Z,{form:M,layout:"vertical",name:"setting_modal",initialValues:s,children:(0,r.jsx)(p.Z.Item,{name:"filename",label:"\u5F85\u5F00\u53D1",rules:[{required:!0,message:"\u5F85\u5F00\u53D1"}],children:(0,r.jsx)(y.Z,{placeholder:"\u5F85\u5F00\u53D1"})})})})};A.default=F},77073:function(me,A,e){var O=e(47220),o=e(96600),l=e(84875),S=e.n(l),W=e(37900),z=e(1334),c=e(63313),h=e.n(c),E=e(71010),H=e(77621),p=e(4874),U=e(59418),V=e(19092),y=e(93600),j=e(51591),_=e(62330),r=function(s,n){var v={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&n.indexOf(t)<0&&(v[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,t=Object.getOwnPropertySymbols(s);d<t.length;d++)n.indexOf(t[d])<0&&Object.prototype.propertyIsEnumerable.call(s,t[d])&&(v[t[d]]=s[t[d]]);return v},F="SECRET_COMBOBOX_MODE_DO_NOT_USE",_e=function(n,v){var t,d=n.prefixCls,M=n.bordered,$=M===void 0?!0:M,g=n.className,Y=n.getPopupContainer,D=n.dropdownClassName,w=n.popupClassName,P=n.listHeight,f=P===void 0?256:P,C=n.placement,I=n.listItemHeight,k=I===void 0?24:I,R=n.size,b=n.disabled,i=n.notFoundContent,L=n.status,q=n.showArrow,x=r(n,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),K=c.useContext(E.E_),ae=K.getPopupContainer,oe=K.getPrefixCls,le=K.renderEmpty,G=K.direction,re=K.virtual,Ee=K.dropdownMatchSelectWidth,se=c.useContext(U.Z),B=oe("select",d),ie=oe(),X=c.useMemo(function(){var ce=x.mode;if(ce!=="combobox")return ce===F?"combobox":ce},[x.mode]),ee=X==="multiple"||X==="tags",ne=q!==void 0?q:x.loading||!(ee||X==="combobox"),Z=(0,c.useContext)(V.aM),ve=Z.status,te=Z.hasFeedback,J=Z.isFormItemInput,ge=Z.feedbackIcon,ue=(0,j.F)(ve,L),Q;i!==void 0?Q=i:X==="combobox"?Q=null:Q=(le||H.Z)("Select");var N=(0,_.Z)((0,o.Z)((0,o.Z)({},x),{multiple:ee,hasFeedback:te,feedbackIcon:ge,showArrow:ne,prefixCls:B})),fe=N.suffixIcon,Oe=N.itemIcon,he=N.removeIcon,pe=N.clearIcon,de=(0,z.Z)(x,["suffixIcon","itemIcon"]),u=S()(w||D,(0,O.Z)({},"".concat(B,"-dropdown-").concat(G),G==="rtl")),a=R||se,T=c.useContext(p.Z),Me=b||T,De=S()((t={},(0,O.Z)(t,"".concat(B,"-lg"),a==="large"),(0,O.Z)(t,"".concat(B,"-sm"),a==="small"),(0,O.Z)(t,"".concat(B,"-rtl"),G==="rtl"),(0,O.Z)(t,"".concat(B,"-borderless"),!$),(0,O.Z)(t,"".concat(B,"-in-form-item"),J),t),(0,j.Z)(B,ue,te),g),Pe=function(){return C!==void 0?C:G==="rtl"?"bottomRight":"bottomLeft"};return c.createElement(W.ZP,(0,o.Z)({ref:v,virtual:re,dropdownMatchSelectWidth:Ee},de,{transitionName:(0,y.mL)(ie,(0,y.q0)(C),x.transitionName),listHeight:f,listItemHeight:k,mode:X,prefixCls:B,placement:Pe(),direction:G,inputIcon:fe,menuItemSelectedIcon:Oe,removeIcon:he,clearIcon:pe,notFoundContent:Q,className:De,getPopupContainer:Y||ae,dropdownClassName:u,showArrow:te||q,disabled:Me}))},m=c.forwardRef(_e);m.SECRET_COMBOBOX_MODE_DO_NOT_USE=F,m.Option=W.Wx,m.OptGroup=W.Xo,A.Z=m}}]);
